pipeline {
    agent any
    stages {
        stage('Build Docker Image') {
            steps {
                dir('2132_clean_work') {
                    writeFile file: 'Dockerfile', text: '''
FROM nginx:alpine
COPY . /usr/share/nginx/html
                    '''
                    sh 'docker build -t html-site .'
                }
            }
        }
        stage('Run Docker Container') {
            steps {
                sh '''
                docker stop html_container || true
                docker rm html_container || true
                docker run -d -p 8081:80 --name html_container html-site
                '''
            }
        }
    }
}

